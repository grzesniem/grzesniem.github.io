<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Średnia - tutorial!</title>
</head>
<body>
        <h2><b>NIE WKLEJAJ KODU HTML!</b></h2>
        <h2><b>W PLIKU SĄ GOTOWE DEFINICJE FUNKCJI!</b></h2>
       <ol>
               <li><a href="template.html">Pobierz template!</a></li>
               <li> Funkcja <b>prompt()</b>
                        <br>
                        Wymagana wiedza:
                        <ul>
                                <li>document.querySelector("h2") - zwraca pierwszy element drzewa DOM, którego selektor CSS zgadza się z argumentem funkcji.</li>
                                <li>innerHTML - zmienna elementu drzewa DOM, który zawiera jego zawartość.</li>
                                <li>prompt() - okno dialogowe, które prosi użytkownika o wpisanie czegoś, po czym <b>zwraca to, co wpisał</b>.</li>
                                <li>window - obiekt okna</li>
                                <li>.onload - wykona funkcję, kiedy obiekt sie załaduję</li>
                        </ul>
                        <br>
                        KOD HTML:
                        <code>
                                <br>  
                                &lt;h2&gt;Witaj &lt;/h2&gt;
                        </code>
                        <br>
                        <br>
                        KOD JS:
                        <code>
                                <br>
                               //kiedy sie okno zaladuje<br>
                                window.onload = function()<br>
                                {<br>
                                &nbsp;&nbsp;//pobierz element, dopisz do jego zawartosc wynik funkcji prompt<br>
                                &nbsp;&nbsp;document.querySelector("h2").innerHTML += prompt("Podaj swoje imie: ", "Franek") + "!";<br>
                                } <br>
                        </code>
               </li>
               <li>
                       Reakcja na dodawane oceny<br>
                       Wymagana wiedza:
                       <br>
                       <ul>
                               <li>.onsubmit - zmienna elementu, która wykonuje funkcję, kiedy formularz zostanie wysłany.</li>
                               <li>this - wskazuje na siebie, dzięki czemu, możemy wysłać element DOM jako argument funkcji.</li>
                               <li>.value - zwraca zawartość pól <b>input</b>.</li>
                               <li>.reset() - resetuje formularz niezależnie od wyniku funkcji sprawdzOcene().</li>
                               <li>parseFloat - przekształca argument w liczbę zmiennoprzecinkową. Za chwilę będzie wiadomo czemu.</li>
                               <li>W javascripcie możemy pobierać zawartość poszczególnych pół formularza za pomocą nazwy znaczników <b>input</b>.</li>
                               <li><b>WNIOSEK:</b>Po kliknięciu this zamieni się we wskaźnik do naszego formularza, z którego będziemy mogli korzystać pod nazwą argumentu.</li>
                       </ul>
                       <br>
                       <br>
                       KOD HTML:
                       <code>
                               <br>  
                              &lt;form onsubmit='dodajOcene(this);return false;' &gt;
                              <br>
                              ...
                              <br>
                                &lt;input placeholder="Ocena" name="ocena" type="text"&gt;
                       </code>
                       <br>
                       <br>
                       KOD JS:
                       <code>
                               <br>
                                <br>
                                // form - nasz formularz  
                                <br>
                                function dodajOcene(form)<br>
                                {<br>
                                        // pobieramy wartość z pola input w formularzu o nazwie ocena i zamieniamy na liczbę zmiennoprzecinkową. <br>
                                &nbsp;&nbsp;let ocena = parseFloat(form.ocena.value);<br>
                                &nbsp;&nbsp;let przedmiot = form.przedmiot.value;<br>
                                <br>
                                &nbsp;&nbsp;if(sprawdzOcene(ocena))//sprawdzamy czy wpisana ocena spełnia wymagania<br>
                                &nbsp;&nbsp;{<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;dodajWierszTabeli(przedmiot, ocena);//jeśli tak to dodajemy do tabeli<br>
                                &nbsp;&nbsp;}<br>
                                <br>
                                &nbsp;&nbsp;form.reset(); // w każdym przypadku będziemy chcieli wyczyścić pola<br>
                                }<br>
                       </code>
                       
               </li>
               <li>funkcja <b>sprawdzOcene()</b>
                <br>
                <b>Opis:</b> Zwraca wartość true, jeżeli wpisana ocena spełnia wymagania, w przeciwnym wypadku false.
                <br>
                Wymagana wiedza:
                <ul>
                        <li>isNaN - is Not-a-Number?, zwróci prawdę, kiedy przekażemy wartość niebędącą liczbą, np.string</li>
                        <li>% - reszta z dzielenia. Reszta z dzielenia przez 1 zawsze zwróci to, co jest po przecinku, stąd wiemy, że liczba nie jest intem. Dlatego wcześniej użyliśmy parseFloat, bo parseInt, by zaokrąglił i reszta z dzielenia by zawsze wynosiła 0.</li>
                </ul>
                KOD JS:
                <code>
                        <br>
                        function sprawdzOcene(ocena)<br>
                        {<br>

                        &nbsp;&nbsp;  if(isNaN(ocena))//czy to jest w ogóle liczba?<br>
                        &nbsp;&nbsp;  {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("Wprowadź liczbę!");<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>
                        &nbsp;&nbsp;  }<br><br>
                        &nbsp;&nbsp;  else if(ocena % 1 != 0)//czy ma coś po przecinku?<br>
                        &nbsp;&nbsp;  {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("Wprowadź liczbę całkowitą!");<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>
                        &nbsp;&nbsp;  }<br>
                        &nbsp;&nbsp;  else if(!(ocena <= 6 && ocena >=1))// Czy jest w przedziale od 1 do 6?<br>
                        &nbsp;&nbsp;  {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("Wprowadź liczbę całkowitą z przedziału od 1 do 6!");<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>
                        &nbsp;&nbsp;  }<br>
                        &nbsp;&nbsp;  return true;//skoro przeszliśmy wszystkie te pytania możemy być pewni, że spełnia wszystkie warunki!<br>
                        }
                </code>
                <li>dodajWierszTabeli()                         <br>
                        <b>OPIS:</b> Funkcja dodaje nowe rekordy do tabeli. Zastosowany jest tutaj pewien trik, do każdej oceny dodajemy klasę "ocena", za chwilę okaże się po co. 
                        <br>
                       Wymagana wiedza:
                       <br>
                       <ul>
                               <li>createElement() - tworzy nowy element drzewa DOM, typu sprecyzowanego w argumencie.</li>
                               <li>appendChild() - dodaje elementy, które są podrzędne do elementu, na którym jest wykonywana funkcja.</li>
                               <li>className - nadaje CSS-ową klasę.</li>
                       </ul>
                       <br>
                       KOD HTML:
                       <code>
                               <br>
                                &lt;table&gt;

                                &lt;/table&gt;
                       </code>
                       <br>
                       KOD JS:
                       <br>
                       <code>
                                function dodajWierszTabeli(przedmiot, ocena)// przedmiot i ocena pochodzą z formularza<br>
                                {<br>
                                &nbsp;&nbsp;let tr = document.createElement("tr"); // utwórz element tr<br>
                                &nbsp;&nbsp;let przedmiotElement = document.createElement("td"); // utwórz element td na przedmiot<br>
                                &nbsp;&nbsp;przedmiotElement.innerHTML = przedmiot; // wypełnij komórkę tabeli<br>
                                &nbsp;&nbsp;let ocenaElement = document.createElement("td"); // utwórz element td na ocenę<br>
                                &nbsp;&nbsp;ocenaElement.innerHTML = ocena; // wypełnij komórkę tabeli<br>
                                &nbsp;&nbsp;ocenaElement.className = "ocena"; // nadaj klasę<br>
                                &nbsp;&nbsp;// utwórz następującą strukturę: <br>

                                &nbsp;&nbsp;//&lt;tr&gt;<br>
                                &nbsp;&nbsp;//&nbsp;&nbsp;&lt;td&gt;Przedmiot&lt;/td&gt;<br>
                                &nbsp;&nbsp;//&nbsp;&nbsp;&lt;td&gt;Ocena&lt;/td&gt;<br>
                                &nbsp;&nbsp;//&lt;/tr&gt;<br>
                                &nbsp;&nbsp;tr.appendChild(przedmiotElement); <br>
                                &nbsp;&nbsp;tr.appendChild(ocenaElement);<br>
                                &nbsp;&nbsp;document.querySelector("table").appendChild(tr); // dodaj do tabeli<br>
                                }<br>
                       </code>
                </li>
                <li>
                        zakończ()<br>
                        Wymagana wiedza:
                        <ul>
                                <li>getElementsByClassName - zwraca wszystkie elementy, które mają klasę taką samą jak argument.</li>
                                <li>.length - zwraca długość tablicy</li>
                                <li>document.write() - usunie cały kod i wypiszę to co jest w argumencie.</li>
                        </ul>
                        <br>
                        KOD HTML
                        <br>
                        <code>
                                &lt;input type="button" value="Zakończ dodawanie!" onclick="zakoncz()"&gt;
                        </code>
                        <br>
                        <br>
                        KOD JS:
                        <br>
                        <code>
function zakoncz()<br>
{<br>
&nbsp;&nbsp;let elements = document.getElementsByClassName("ocena");// tablica elementów, które mają klasę ocena<br>
&nbsp;&nbsp;let srednia = 0;<br>
&nbsp;&nbsp;for(let i=0;i&lt;elements.length;i++)<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;srednia+=parseInt(elements[i].innerHTML);//dodajemy wszystkie oceny<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;srednia /= elements.length;//dzielimy przez ilość elementów tablicy, aby otrzymać średnią<br>
&nbsp;&nbsp;document.write("Twoja średnia: " + srednia.toFixed(2));//wypisujemy do dwóch miejsc po przecinku<br>
}<br>
                        </code>
                </li>
       </ol> 
</body>
</htmlr
